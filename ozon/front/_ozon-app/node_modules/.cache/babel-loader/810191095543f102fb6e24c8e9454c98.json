{"ast":null,"code":"var _jsxFileName = \"C:\\\\PycharmProjects\\\\lab4\\\\ozon-app\\\\src\\\\pages\\\\ProductPage.js\",\n  _s = $RefreshSig$();\nimport { useParams } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport { BACKEND_URL, GetOneProduct } from \"../contexts/provider\";\nimport \"../styles/ProductPage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductPage() {\n  _s();\n  const [count, setCount] = useState(1);\n  const params = useParams();\n  const productId = params.id;\n  const product = GetOneProduct(productId);\n  const buy = (quantity, user, product) => {\n    const ob = {\n      quantity: quantity,\n      id_user: user,\n      id_product: product\n    };\n    fetch(`${BACKEND_URL}/cart/`, {\n      method: \"post\",\n      headers: {\n        \"Authorization\": `Token ${sessionStorage.getItem('token')}`,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(ob)\n    }).then(res => res.json()).then(res => {\n      console.log(JSON.stringify(ob));\n    });\n  };\n  const change_product = new_price => {\n    const ob = {\n      id: productId,\n      product_name: product.product_name,\n      product_pic: product.product_pic,\n      product_price: new_price,\n      characteristics: product.characteristics\n    };\n  };\n  const get_user = () => {\n    console.log();\n    fetch(`${BACKEND_URL}/rest-auth/user/`, {\n      headers: {\n        \"Authorization\": `Token ${sessionStorage.getItem('token')}`\n      }\n    }).then(response => response.json()).then(data => {\n      console.log(data.pk);\n      setUser(data);\n    });\n  };\n  const [user, setUser] = useState({\n    \"pk\": 1,\n    \"username\": \"\",\n    \"email\": \"\",\n    \"first_name\": \"\",\n    \"last_name\": \"\"\n  });\n  useEffect(() => {\n    get_user();\n  }, []);\n  const [price, setPrice] = useState(product.product_price);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"/\",\n      children: \"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"/products\",\n      children: \"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: `/products/${productId}`,\n      children: product.product_name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"single_product_block\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"single_proudct_title\",\n        children: product.product_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"single_im_ds_block\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: product.product_pic,\n          className: \"single_product_image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"single_product_description\",\n          children: product.characteristics\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"single_pr_cart_block\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"single_product_cart\",\n          children: localStorage.getItem('user_status') === \"false\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"count_button\",\n              onClick: () => setCount(count + 1),\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"count_button\",\n              onClick: () => {\n                if (count > 1) {\n                  setCount(count - 1);\n                }\n              },\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E: \", count]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"single_product_btn\",\n              id: \"buy_button\",\n              type: \"submit\",\n              value: \"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\",\n              onClick: () => {\n                buy(count, localStorage.getItem('user_id'), productId);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"single_product_price\",\n          children: [product.product_price * count, \" \\u20BD\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), localStorage.getItem('user_status') === \"true\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"single_product_price\",\n            children: [price, \" \\u20BD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"single_product_price\",\n            type: \"size\",\n            value: price,\n            onChange: event => setPrice(event.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n}\n_s(ProductPage, \"QiJVpcpAtjT3WLtphTAgvGkhyGY=\", false, function () {\n  return [useParams];\n});\n_c = ProductPage;\n;\nexport default ProductPage;\nvar _c;\n$RefreshReg$(_c, \"ProductPage\");","map":{"version":3,"names":["useParams","useState","useEffect","BACKEND_URL","GetOneProduct","ProductPage","count","setCount","params","productId","id","product","buy","quantity","user","ob","id_user","id_product","fetch","method","headers","sessionStorage","getItem","body","JSON","stringify","then","res","json","console","log","change_product","new_price","product_name","product_pic","product_price","characteristics","get_user","response","data","pk","setUser","price","setPrice","localStorage","event","target","value"],"sources":["C:/PycharmProjects/lab4/ozon-app/src/pages/ProductPage.js"],"sourcesContent":["import { useParams } from \"react-router-dom\";\r\n    import {useState, useEffect} from \"react\";\r\nimport {BACKEND_URL, GetOneProduct} from \"../contexts/provider\";\r\nimport \"../styles/ProductPage.css\"\r\n\r\nfunction ProductPage() {\r\n    const [count, setCount] = useState(1);\r\n\r\n    const params = useParams();\r\n    const productId = params.id;\r\n    const product = GetOneProduct(productId);\r\n\r\n    const buy = (quantity, user, product) => {\r\n        const ob = {\r\n            quantity: quantity,\r\n            id_user: user,\r\n            id_product: product\r\n        }\r\n        fetch(`${BACKEND_URL}/cart/`, {\r\n            method: \"post\",\r\n            headers: {\r\n                \"Authorization\": `Token ${sessionStorage.getItem('token')}`,\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(ob)\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                console.log(JSON.stringify(ob));\r\n            })\r\n    }\r\n\r\n    const change_product = (new_price) => {\r\n        const ob = {\r\n            id: productId,\r\n            product_name: product.product_name,\r\n            product_pic: product.product_pic,\r\n            product_price: new_price,\r\n            characteristics: product.characteristics,\r\n            \r\n        }\r\n    }\r\n\r\n    const get_user=()=> {\r\n        console.log()\r\n        fetch(`${BACKEND_URL}/rest-auth/user/`, {\r\n            headers: {\r\n                \"Authorization\": `Token ${sessionStorage.getItem('token')}`,\r\n            },\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data.pk)\r\n                setUser(data);\r\n            })\r\n    }\r\n\r\n    const [user, setUser] = useState(\r\n        {\r\n            \"pk\": 1,\r\n            \"username\": \"\",\r\n            \"email\": \"\",\r\n            \"first_name\": \"\",\r\n            \"last_name\": \"\"\r\n        }\r\n    )\r\n\r\n    useEffect( () => {\r\n        get_user();\r\n    }, [])\r\n\r\n    const [price, setPrice] = useState(product.product_price)\r\n\r\n\r\n    return (\r\n        <div>\r\n            <a href=\"/\">Главная/</a>\r\n            <a href=\"/products\">Каталог/</a>\r\n            <a href={`/products/${productId}`}>{product.product_name}</a>\r\n\r\n            <div className={\"single_product_block\"}>\r\n                <div className={\"single_proudct_title\"}>{product.product_name}</div>\r\n                <div className={\"single_im_ds_block\"}>\r\n                    <img src={product.product_pic} className={\"single_product_image\"}></img>\r\n                    <div className={\"single_product_description\"}>{product.characteristics}</div>\r\n                </div>\r\n                <div className={\"single_pr_cart_block\"}>\r\n                    <div className={\"single_product_cart\"}>\r\n                        {\r\n                            localStorage.getItem('user_status') === \"false\" ?\r\n                                <div>\r\n                                    <button className=\"count_button\" onClick={()=>setCount(count+1)}>+</button>\r\n                                    <button className=\"count_button\" onClick={() => {\r\n                                        if (count > 1) {\r\n                                            setCount(count - 1)\r\n                                        }\r\n                                    }\r\n                                    }>-\r\n                                    </button>\r\n                                    <div>Количество: {count}</div>\r\n                                    <input className={\"single_product_btn\"} id=\"buy_button\" type=\"submit\" value=\"В корзину\" onClick={()=>{buy(count, localStorage.getItem('user_id'), productId)}}/>\r\n                                </div>\r\n                                :\r\n                                <div>\r\n\r\n                                </div>\r\n                        }\r\n                    </div>\r\n                    <div className={\"single_product_price\"}>{product.product_price * count} ₽</div>\r\n                    {\r\n                        localStorage.getItem('user_status') === \"true\" ?\r\n                            <div>\r\n                                <div className=\"single_product_price\">{price} ₽</div>\r\n                                <input className=\"single_product_price\"\r\n                                       type=\"size\"\r\n                                       value={price}\r\n                                       onChange={(event) => setPrice(event.target.value)}\r\n                                />\r\n                            </div>\r\n                            :\r\n                            <div></div>\r\n                    }\r\n                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}